<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<nav th:replace="partials/navbar :: navbar"></nav>
<head th:replace="partials/head :: head-section ">
    <title>Profile Page</title>
</head>
<body>
<div id="request-message" th:if="${requestMessage} != null" th:text="${requestMessage}" style="display: none"></div>
<div class="row">
    <div class="col s12">
        <ul class="tabs">
            <li class="tab col s3"><a href="#info">Patient Information</a></li>
<!--            <li class="tab col s3>"><a href="#message">Messages</a></li>-->
            <li class="tab col s3>"><a href="#prescrip">Your Prescriptions</a></li>
        </ul>
    </div>

    <div id="info" class="col s12">

        <h5 class="white-text">Your profile information</h5>

        <ul class="collection">
            <li class="collection-item avatar">
                <span class="title">Name</span>
                <i class="material-icons circle black">badge</i>
                <p th:value="${patient.username}" th:name="username" th:text="${patient.username}"
                   class="blue-text"></p>
            </li>
            <li class="collection-item avatar">
                <i class="material-icons circle waves-orange">home</i>
                <span class="title">Address</span>
                <p th:value="${patientInfo.address}" th:name="address" th:text="${patientInfo.address}">
            </li>
            <li class="collection-item avatar">
                <i class="material-icons circle pink">cake</i>
                <span class="title">Date of Birth</span>
                <p th:value="${patientInfo.dob}" th:name="dob" th:text="${patientInfo.dob}"></p>
            </li>
        </ul>
        <a th:href="@{/patientProfile/{id}/edit(id=${patient.getId()})}" class="btn orange  waves-effect waves-light">Edit profile</a>
    </div>

<!--    <div id="message" class="col s12 white-text">-->
<!--        <h5>Message your Pharmacist !</h5>-->
<!--        <hr>-->
<!--        <form th:action="@{|/patientProfile/${patient.id}|}" th:method="POST">-->
<!--            <div class="container">-->
<!--                <div class="row">-->
<!--                    <div class="input-field col s12">-->
<!--                        <span class="material-icons circle green ">app_registration</span>-->
<!--                        <label>-->
<!--                            <input placeholder="Subject" id="subject" type="text" class="required white-text"/>-->
<!--                        </label>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="container">-->
<!--                <div class="row">-->
<!--                    <div class="input-field col s12">-->
<!--                        <label><textarea id="msg" class="materialize-textarea white-text"-->
<!--                                         placeholder="Your message here" data-length="300"></textarea></label>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card-action right-align">-->
<!--                <input type="reset" id="reset" class="btn-flat grey-text waves-effect">-->
<!--                <input type="submit" class="btn orange  waves-effect waves-light" value="Submit">-->
<!--            </div>-->
<!--        </form>-->
<!--    </div>-->


    <div id="prescrip" class="col s12">
        <div th:each="prescription : ${patient.prescriptions}">
            <div class="container white-text">
                <table class="striped centered responsive-table">
                    <tr class="black-text center-align">
                        <th>NAME</th>
                        <th>CREATED AT</th>
                        <th>VERIFIED</th>
                        <th>DOCTOR</th>
                        <th>VIEW REQUESTS</th>
                    </tr>
                    <tr>
                        <td th:text="${prescription.drug.drug_name}">"</td>
                        <td th:text="${prescription.created_at}">"</td>
                        <td th:text="${prescription.is_verified} ? 'Verified' : 'Not Verified'"></td>
                        <td th:text="${prescription.doctor.fullName}"></td>
                        <td><a class="pRequest waves-effect waves-light btn"
                               th:href="@{/prescription-request/{id}(id=${prescription.id})}">Request Fill</a></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

</div>

<div th:replace="partials/scripts :: scripts"></div>
<script>
    $(document).ready(function () {
        let msg = $("#request-message").text();

        if (msg.length) {
            alert(msg)
        }
        $('#msg').trigger('autoresize');
    })
</script>



</body>
</html>
