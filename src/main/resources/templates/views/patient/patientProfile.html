<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="partials/head :: head-section "></head>
<nav th:replace="partials/navbar :: navbar"></nav>
<body>
<div class="row">
    <div class="col s12">
        <ul class="tabs">
            <li class="tab col s3"><a href="#info">Patient Information</a></li>
            <li class="tab col s3>"><a href="#message">Messages</a></li>
            <li class="tab col s3>"><a href="#prescrip">Your Prescriptions</a></li>
        </ul>
    </div>
    <div id="info" class="col s12">
        <ul class="collection">
            <li class="collection-item avatar">
                <span class="title">Name</span>
                <i class="material-icons circle green">badge</i>
                <p th:text="${patient.username}"></p>
            </li>
            <li class="collection-item avatar">
                <i class="material-icons circle green">home</i>
                <span class="title">Address</span>
                <p th:text="${patientInfo.address}">
            </li>
            <li class="collection-item avatar">
                <i class="material-icons circle green">cake</i>
                <span class="title">Date of Birth</span>
                <p th:text="${patientInfo.dob}"></p>
            </li>
        </ul>
    </div>

    <div id="message" class="col s12 white-text"> Message your Pharmacist !
        <hr>
        <form th:action="@{|/patientProfile/${patient.id}|}" th:method="POST">
            <div class="container">
                <div class="row">
                    <div class="input-field col s12">
                        <span class="material-icons circle green ">app_registration</span>
                      <label>
                          <input placeholder="Subject" id="subject" type="text" class="required white-text"/>
                      </label>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="input-field col s12">
                        <label><textarea id="msg" class="materialize-textarea white-text" placeholder="Your message here"></textarea></label>
                    </div>
                </div>
            </div>
            <div class="card-action right-align">
                <input type="reset" id="reset" class="btn-flat grey-text waves-effect">
                <input type="submit" class="btn orange  waves-effect waves-light" value="Submit">
            </div>
        </form>
    </div>


    <div id="prescrip" class="col s12 ">
        <div th:each="prescription : ${patient.prescriptions}">
            <div class="container white-text">
            <table class="striped">
                <tr class="black-text">
                    <th>Name</th>
                    <th>Created at</th>
                    <th>Verified</th>
                    <th>Doctor</th>
                    <th>View Requests</th>
                </tr>
                <tr>
                    <td th:text="${prescription.drug.drug_name}">"</td>
                    <td th:text="${prescription.created_at}">"</td>
                    <td th:text="${prescription.is_verified} ? 'Verified' : 'Not Verified'"></td>
                    <td th:text="${prescription.doctor.full_name}"></td>
                    <td><a class="pRequest waves-effect waves-light btn" th:href="@{/prescription/{id}/request(id=${prescription.id})}">Request Fill</a></td>
                </tr>
            </table>

                <button data-target="modal1" class="btn modal-trigger">Modal</button>
            </div>
        </div>

        <!-- Modal Structure -->
<!--        <div id="request" class="modal">-->
<!--            <div class="modal-content">-->
<!--                <h4>Prescription Fill Request</h4>-->
<!--                <div class="row">-->
<!--                    <form class="col s12">-->
<!--                        <div class="row">-->
<!--                            <div class="input-field col s12">-->
<!--                                <textarea id="note" name="note" class="materialize-textarea"></textarea>-->
<!--                                <label for="note">Leave A Note</label>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </form>-->
<!--                </div>-->

<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>-->
<!--            </div>-->
        </div>
    </div>
</div>

<div th:replace="partials/scripts :: scripts">
<script>
    // let selected;

    // $(document).ready(function(){
    //     $('.modal').modal();
    //
    //     $('.trigger-modal').modal();
    //
    //     $('.pRequest').click(function(){
    //         selected = $(this).attr('data-value').val();
    //         console.log(selected)
    //     });
    // });

</script>



</div>

</body>
</html>
